    <!-- СПИСОК КНИГ -->
    {% for book in books %}
        <div class="book-card" style="display: flex; gap: 20px; align-items: flex-start; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px;">
            
            <!-- ОБЛОЖКА (с защитой от сжатия) -->
            {% if book.cover %}
                <img src="{{ book.cover.url }}" alt="{{ book.title }}" 
                     style="width: 100px; height: 150px; object-fit: cover; border-radius: 4px; flex-shrink: 0;">
            {% else %}
                <div style="width: 100px; height: 150px; background: #ddd; display: flex; align-items: center; justify-content: center; border-radius: 4px; flex-shrink: 0;">
                    <span style="color: #888; text-align: center; font-size: 14px;">Нет фото</span>
                </div>
            {% endif %}

            <!-- ИНФОРМАЦИЯ О КНИГЕ -->
            <div style="flex-grow: 1;">
                <h2 style="margin: 0 0 10px 0;"><a href="{% url 'book_detail' book.pk %}" style="text-decoration: none; color: #2980b9;">{{ book.title }}</a></h2>
                <p style="margin: 0 0 10px 0;"><strong>Автор:</strong> {{ book.author }} | <strong>Год:</strong> {{ book.year }}</p>
                
                <p style="color: #555; line-height: 1.5;">{{ book.content|truncatewords:30 }}</p>

                <!-- ТЕГИ ЖАНРОВ КНИГИ -->
                <div style="margin-top: 15px; display: flex; gap: 8px; flex-wrap: wrap;">
                    {% for genre in book.genres.all %}
                        <a href="?genre={{ genre.id }}" class="book-tag">
                            {{ genre.name }}
                        </a>
                    {% empty %}
                        <span style="color: #999; font-size: 0.8em;">Жанры не указаны</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% empty %}
        <p>Книг не найдено. Попробуйте изменить параметры поиска.</p>
    {% endfor %}